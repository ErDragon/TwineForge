
/* TwineForge â€” compact, isolated styles with skins bar inside header */

/* Isolation */
#VarStateContainer, #VarStateContainer * { box-sizing: border-box; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

/* Shell */
#VarStateContainer{
  position: fixed;
  top: 12px; right: 12px; left: auto;
  width: 520px; height: 560px;
  max-width: min(92vw, 900px);
  max-height: min(92vh, 900px);
  overflow: auto;
  border-radius: 12px;
  border: 1px solid #2a2e37;
  background: #0b0c0f;
  color: #e7e7ea;
  box-shadow: 0 12px 30px rgba(0,0,0,.55);
  z-index: 2147483647 !important;
}

/* Header */
#VarStateContainer #th-header{
  position: sticky; top: 0; z-index: 10;
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 10px; align-items: center;
  padding: 10px;
  margin: -6px -6px 0 -6px;
  background: #0f1116;
  border-bottom: 1px solid #2a2e37;
  border-top-left-radius: 12px; border-top-right-radius: 12px;
}
#VarStateContainer #th-title{ font-weight:700; letter-spacing:.2px; font-size:14px; padding-left:6px; color:inherit; text-shadow:none; background:none; }
#VarStateContainer #th-search-wrap{ display:flex; align-items:center; gap:6px; min-width: 240px; }

/* Controls */
#VarStateContainer input[type="search"],
#VarStateContainer input[type="text"],
#VarStateContainer input[type="number"],
#VarStateContainer select,
#VarStateContainer button{
  -webkit-appearance: none; appearance: none;
  background:#151a22; border:1px solid #2b3140; color:#cfd3dc;
  padding:8px 10px; border-radius:10px; font-size: 12px; outline: none;
}
#VarStateContainer input::placeholder{ color:#7f8799; }
#VarStateContainer button{ cursor:pointer; }
#VarStateContainer button:hover{ background:#1a2130; border-color:#3b4257; }

/* Header skins bar */
#VarStateContainer #th-skinsbar{
  grid-column: 1 / -1;
  display:flex; align-items:center; gap:8px;
  padding: 8px 10px 8px 10px;
  margin: 8px 0 0 0;
  border-top: 2px solid #2a2e37;
}
#VarStateContainer #th-skinsbar .label{ color:#aeb9cc; font-weight:600; }

/* Sections */
#VarStateContainer .var-type-object{
  border: 1px solid #222; padding: 10px; margin: 10px; border-radius: 10px; background:#0a0b10;
}
#VarStateContainer .var-type-object > .var-title{
  font-weight:600; display:block; margin-bottom:8px; color:#d6dae3; cursor:pointer; position:relative; padding-right:28px;
}

/* Pin button */
#VarStateContainer .th-pin{
  background:#151a22; border:1px solid #2b3140; color:#cfd3dc;
  border-radius:8px; font-size:12px; height:24px; min-width:24px;
  padding:0 6px; display:inline-flex; align-items:center; justify-content:center; cursor:pointer;
  background:#151a22; border:1px solid #2b3140; color:#cfd3dc;
  padding:2px 6px; border-radius:8px; font-size: 12px; cursor:pointer;
}
#VarStateContainer .th-pin.active{ background:#26314a; border-color:#3d4a6e; }

/* Properties collapse */
#VarStateContainer .var-type-object .var-properties{
  position: relative; background:#0b0b0f; border:1px solid #2a2e37; padding: 8px;
  overflow: hidden; max-height: 0; transition: max-height .18s ease; border-radius: 8px;
}
#VarStateContainer .var-type-object.properties-open .var-properties{ overflow: auto; max-height: 1200px; }

/* Field rows */
#VarStateContainer .var-field{
  display: grid; grid-template-columns: 42% 58%;
  gap: 8px; align-items: center;
  padding: 6px 6px; margin: 4px 0;
  border-bottom: 1px solid #171a21; border-radius: 8px;
}
#VarStateContainer .var-title{ overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color:#aeb9cc; position:relative; padding-right: 44px; 
  min-height: 32px;
  line-height: 32px;}
#VarStateContainer .var-input{
  width: 100%; min-height: 30px;
  background:#0d1117; color:#e8e8ea; border:1px solid #2a2e37; border-radius:10px;
  padding: 6px 8px; outline:none; display:block;
}
#VarStateContainer .var-input:focus{ border-color:#4a6cff; box-shadow:0 0 0 2px rgba(74,108,255,.15); }
#VarStateContainer .var-input.value-changed{ outline: 1px dashed #f0c73b; background:#1f1a05; }

/* Pinned tweaks */
#TH-PINNED .var-field .var-value{ display:flex; gap:8px; align-items:center; }
#TH-PINNED .var-field .var-input{ flex: 1 1 auto; min-width: 0; }

/* Search highlight */
#VarStateContainer .th-match{ background: rgba(74,108,255,.10); border-radius: 8px; }
#VarStateContainer .th-current{ outline:2px solid rgba(74,108,255,.6); border-radius:8px; }

/* Resize cursors */
#VarStateContainer.th-resize-e, #VarStateContainer.th-resize-w { cursor: ew-resize; }
#VarStateContainer.th-resize-n, #VarStateContainer.th-resize-s { cursor: ns-resize; }
#VarStateContainer.th-resize-ne { cursor: nesw-resize; }
#VarStateContainer.th-resize-nw { cursor: nwse-resize; }
#VarStateContainer.th-resize-se { cursor: nwse-resize; }
#VarStateContainer.th-resize-sw { cursor: nesw-resize; }

/* Scrollbars */
#VarStateContainer::-webkit-scrollbar{ width: 10px; }
#VarStateContainer::-webkit-scrollbar-thumb{ background:#2a2e37; border-radius:10px; }


#VarStateContainer .var-title .th-pin{ position:absolute; right:6px; top:50%; transform:translateY(-50%); }
#VarStateContainer .var-value .th-pin{ position: static; transform:none; margin-left:6px; }
#VarStateContainer #th-skinsbar select,
#VarStateContainer #th-skinsbar button{
  height: 28px;
  padding: 0 10px;
  line-height: 1.2;
  display: inline-flex;
  align-items: center;
}
#VarStateContainer #th-skinsbar .label{ font-size:13px; }

#VarStateContainer .var-type-object .var-properties:empty {
  background: #551515;
  border: 1px solid #993333;
  min-height: 32px;
}

#VarStateContainer .var-type-object.properties-open .var-properties:empty {
  background: #551515;
  border: 1px solid #993333;
  min-height: 32px;
}

#VarStateContainer .th-find-nav button {
  margin-right: 8px;
}

#VarStateContainer .th-find-nav button:last-child {
  margin-right: 0;
}

#VarStateContainer .var-type-object.properties-open > .var-properties{
  max-height: 10000px !important;
}


/* ===== ForgeLink (Update Checker) ===== */
#VarStateContainer #th-right{ display:flex; justify-content:flex-end; align-items:center; }
#VarStateContainer #th-update{ display:flex; align-items:center; gap:8px; }
#VarStateContainer #th-update-check{
  background:#151a22; border:1px solid #2b3140; color:#cfd3dc;
  padding:6px 10px; border-radius:10px; font-size:12px; cursor:pointer;
}
#VarStateContainer #th-update-check:hover{ background:#1a2130; border-color:#3b4257; }
#VarStateContainer #th-update-badge{
  display:inline-block; font-size:11px; line-height:1; padding:5px 8px;
  border-radius:999px; border:1px solid transparent; user-select:none;
}
#VarStateContainer #th-update-badge.ok{
  background:#0f1a12; color:#9ff0b1; border-color:#204a32;
}
#VarStateContainer #th-update-badge.new{
  background:#1f170a; color:#ffd28a; border-color:#5a3a12;
}
#VarStateContainer #th-update-badge.err{
  background:#16161a; color:#b7bcc9; border-color:#2a2e37;
}


/* User-skin banner overlay */
#VarStateContainer #th-header { position: sticky; top: 0; overflow: hidden; }
#VarStateContainer #th-header .th-banner{
  position:absolute; inset:0 0 auto 0; height:64px;
  background-size:cover; background-position:center;
  opacity:.22; pointer-events:none; filter:saturate(1.05) contrast(1.05);
}
#VarStateContainer #th-header > *:not(.th-banner){ position:relative; z-index:1; }




@keyframes twineGlow {
  0% { filter: drop-shadow(0 0 2px rgba(120,255,200,.3)); }
  100% { filter: drop-shadow(0 0 8px rgba(120,255,200,.6)); }
}

/* ===== Update Footer (above scrollbar) ===== */
#VarStateContainer #th-footer {
  position: sticky;
  bottom: 4px;
  z-index: 8;
  margin: 6px 10px 8px 10px;
  padding: 10px;
  text-align: center;
  font-size: 12px;
  background: linear-gradient(180deg, #181b20, #0f1114);
  border: 1px solid #2a2e37;
  color: #ffd28a;
  border-radius: 8px;
  display: none;
  opacity: 0;
  transform: translateY(6px);
  transition: all .25s ease;
}
#VarStateContainer #th-footer.show {
  display: block !important;
  opacity: 1;
  transform: translateY(0);
}
#VarStateContainer #th-footer .msg b {
  color: #ffe49a;
  text-decoration: underline;
}


/* ===== ForgeLink alert state ===== */
@keyframes forgeAlertPulse {
  0% { box-shadow: 0 0 8px rgba(255,210,138,.4); }
  50% { box-shadow: 0 0 16px rgba(255,180,60,.6); }
  100% { box-shadow: 0 0 8px rgba(255,210,138,.4); }
}
#VarStateContainer #th-update-check.new {
  background: #1f1606;
  color: #ffe2a8;
  border-color: #ffbb55;
  font-weight: 700;
  animation: forgeAlertPulse 1.5s ease-in-out infinite;
}
#VarStateContainer #th-update-check.new:hover {
  background: #2b1c08;
  border-color: #ffc973;
  color: #fff2d0;
}


/* ===== TwineForge Toast ===== */
#VarStateContainer #th-toast{
  position: sticky;
  bottom: 8px;
  margin: 6px 10px;
  z-index: 9;
  display: none;
}
#VarStateContainer #th-toast .th-toast-msg{
  background:#0f131a;
  border:1px solid #2a2e37;
  border-radius:10px;
  padding:10px 12px;
  font-size:12px;
  color:#dfe6f2;
  box-shadow:0 6px 16px rgba(0,0,0,.35);
}
#VarStateContainer #th-toast .ok{ border-color:#204a32; color:#bff6c9; }
#VarStateContainer #th-toast .err{ border-color:#5a2a2a; color:#f2b7b7; }



/* Toast close button */
#VarStateContainer #th-toast .th-toast-msg { position: relative; padding-right: 28px; }
#VarStateContainer #th-toast .th-toast-close{
  position:absolute; right:8px; top:6px; cursor:pointer; opacity:.75;
  font-weight:700; user-select:none;
}
#VarStateContainer #th-toast .th-toast-close:hover{ opacity:1; }

/* Toast: wrap + full width */
#VarStateContainer #th-toast .th-toast-msg{
  display: block;
  width: 100%;
  max-width: 100%;
  white-space: normal;        
  overflow-wrap: anywhere;    
  word-break: break-word;     
  line-height: 1.4;
  text-align: left;
}


/* ===== Minimize / Maximize ===== */
#VarStateContainer.th-min{
  width: auto !important;
  height: auto !important;
  max-width: none;
  max-height: none;
  padding: 0;
  border: 0;
  background: transparent;
  box-shadow: none;
  overflow: visible;
}
#VarStateContainer.th-min > *:not(.th-mini){ display: none !important; }
#VarStateContainer .th-mini{
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid #2b3140;
  background: #0f1116;
  color: #cfd3dc;
  box-shadow: 0 8px 20px rgba(0,0,0,.35);
  user-select: none;
}
#VarStateContainer .th-mini .label{
  font-weight: 700;
  opacity: .9;
}
#VarStateContainer .th-mini #th-maximize{
  -webkit-appearance: none; appearance: none;
  background:#151a22; border:1px solid #2b3140; color:#cfd3dc;
  padding:6px 10px; border-radius:10px; font-size:12px; cursor:pointer;
}
#VarStateContainer .th-mini #th-maximize:hover{
  background:#1a2130; border-color:#3b4257;
}


/* Minimized: hide any skin watermark/logo and header banner */
#VarStateContainer.th-min::before { content: none !important; display: none !important; }
#VarStateContainer.th-min #th-header .th-banner { display: none !important; }
/* Minibar drag affordance */
#VarStateContainer .th-mini { cursor: move; }
#VarStateContainer .th-mini #th-maximize { cursor: pointer; }



/* Header right block spacing (ForgeLink / badge / Minimize) */
#VarStateContainer #th-right{ gap: 12px; }
#VarStateContainer #th-update{ gap: 10px; } /* slightly more breathing room inside the group */

